# =============================================================================
# UDS Example: AI Generation Output
# =============================================================================
# Purpose: Dashboard generated by AI with confidence scores and review metadata
# Demonstrates: Generated dashboard, confidence scores, review status
# Spec sections: 23
# =============================================================================

uds: "0.1.0"

dashboard:
  title: "Sales Performance Dashboard"
  intent: "Track monthly sales performance with regional breakdown and top products"

  # AI populated decisions array
  decisions:
    - "Identify underperforming regions for resource reallocation"
    - "Evaluate top product performance for inventory planning"
    - "Assess sales team performance against targets"

  persona:
    type: manager
    characteristics:
      attention_span: moderate
      data_literacy: medium
      interaction_preference: moderate

  semantic_sources:
    - id: sales
      type: cube
      endpoint: "https://cube.example.com/cubejs-api/v1"
      authentication:
        type: bearer
        token_env: "CUBE_API_TOKEN"

  layout:
    type: grid
    columns: 12
    row_height: 60

  panels:
    # KPI Row - AI generated with high confidence
    - id: revenue_kpi
      type: kpi
      title: "Total Revenue"
      position: { row: 0, column: 0, width: 3, height: 2 }
      data:
        source: sales
        metrics: [{ ref: "sales.total_revenue" }]
        time_range: { type: relative, value: "this_month" }
      options:
        format: { style: currency, currency: USD, notation: compact }
        comparison: { enabled: true, type: previous_period }
        target: { value: 1000000, show_progress: true }
      generation_metadata:
        confidence: 0.95
        reasoning: "Core metric explicitly requested in prompt"

    - id: orders_kpi
      type: kpi
      title: "Total Orders"
      position: { row: 0, column: 3, width: 3, height: 2 }
      data:
        source: sales
        metrics: [{ ref: "sales.total_orders" }]
        time_range: { type: relative, value: "this_month" }
      options:
        format: { style: number, precision: 0 }
        comparison: { enabled: true, type: previous_period }
      generation_metadata:
        confidence: 0.95
        reasoning: "Core metric explicitly requested"

    - id: aov_kpi
      type: kpi
      title: "Avg Order Value"
      position: { row: 0, column: 6, width: 3, height: 2 }
      data:
        source: sales
        metrics: [{ ref: "sales.average_order_value" }]
        time_range: { type: relative, value: "this_month" }
      options:
        format: { style: currency, currency: USD, precision: 0 }
        comparison: { enabled: true, type: previous_period }
      generation_metadata:
        confidence: 0.92
        reasoning: "Derived metric for manager persona"

    - id: conversion_kpi
      type: kpi
      title: "Conversion Rate"
      position: { row: 0, column: 9, width: 3, height: 2 }
      data:
        source: sales
        metrics: [{ ref: "sales.conversion_rate" }]
        time_range: { type: relative, value: "this_month" }
      options:
        format: { style: percent, precision: 1 }
        comparison: { enabled: true, type: previous_period }
      generation_metadata:
        confidence: 0.90
        reasoning: "Conversion rate mentioned in prompt"

    # Trend Chart - AI generated
    - id: revenue_trend
      type: trend
      title: "Revenue Trend (12 Months)"
      position: { row: 2, column: 0, width: 12, height: 4 }
      data:
        source: sales
        metrics: [{ ref: "sales.total_revenue" }]
        time_range: { type: relative, value: "last_12_months" }
        time_grain: month
      options:
        style: area
        y_axis: { format: { style: currency, currency: USD, notation: compact } }
      generation_metadata:
        confidence: 0.93
        reasoning: "12-month trend explicitly requested"

    # Bar Chart - AI generated
    - id: top_products
      type: bar
      title: "Top 10 Products"
      position: { row: 6, column: 0, width: 7, height: 5 }
      data:
        source: sales
        metrics: [{ ref: "sales.total_revenue" }]
        dimensions: [{ ref: "sales.product_name" }]
        time_range: { type: relative, value: "this_month" }
      options:
        orientation: horizontal
        limit: 10
        sort_by: value
        sort_order: desc
      generation_metadata:
        confidence: 0.88
        reasoning: "Top products by revenue mentioned, horizontal orientation for readability"

    # Pie Chart - AI generated
    - id: regional_breakdown
      type: pie
      title: "Revenue by Region"
      position: { row: 6, column: 7, width: 5, height: 5 }
      data:
        source: sales
        metrics: [{ ref: "sales.total_revenue" }]
        dimensions: [{ ref: "sales.region" }]
        time_range: { type: relative, value: "this_month" }
      options:
        style: donut
        limit: 8
      generation_metadata:
        confidence: 0.85
        reasoning: "Regional breakdown as pie chart mentioned in prompt"

    # Table - AI generated
    - id: manager_performance
      type: table
      title: "Sales by Account Manager"
      position: { row: 11, column: 0, width: 12, height: 5 }
      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"
          - ref: "sales.total_orders"
          - ref: "sales.average_order_value"
        dimensions:
          - ref: "sales.account_manager"
          - ref: "sales.region"
        time_range: { type: relative, value: "this_month" }
      options:
        sorting: { initial: { field: "sales.total_revenue", order: desc } }
        pagination: { enabled: true, page_size: 20 }
      generation_metadata:
        confidence: 0.82
        reasoning: "Performance table inferred from 'sales by account manager' requirement"

  # Generation configuration showing assisted mode
  generation:
    mode: assisted  # Dashboard was generated, now ready for human review
    prompt: "Create a sales performance dashboard for managers..."
    model: "claude-3-5-sonnet-20241022"
    timestamp: "2026-01-11T10:30:00Z"
    review_status: pending
    overall_confidence: 0.89
    suggestions:
      - "Consider adding quota attainment KPI if targets data is available"
      - "Regional breakdown could include YoY comparison"
      - "Table could benefit from conditional formatting on quotas"

  accessibility:
    alt_text: "AI-generated sales dashboard with KPIs, trend, top products bar chart, regional pie chart, and performance table, marked for human review"
