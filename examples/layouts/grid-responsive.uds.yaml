# =============================================================================
# UDS Example: Responsive Grid Layout
# =============================================================================
# Purpose: 12-column responsive grid with breakpoints
# Demonstrates: Grid layout, responsive breakpoints, panel repositioning
# Spec sections: 12
# =============================================================================

uds: "0.1.0"

dashboard:
  title: "Responsive Sales Dashboard"
  intent: "Sales overview that adapts to different screen sizes from desktop to mobile"

  persona:
    type: manager
    characteristics:
      attention_span: moderate
      data_literacy: medium
      interaction_preference: moderate
      primary_device: any

  semantic_sources:
    - id: sales
      type: cube
      endpoint: "https://cube.example.com/cubejs-api/v1"
      authentication:
        type: bearer
        token_env: "CUBE_API_TOKEN"

  layout:
    type: grid
    columns: 12
    row_height: 80
    gap: 16

    # Responsive breakpoints
    breakpoints:
      - name: large
        min_width: 1200
        columns: 12
      - name: medium
        min_width: 768
        max_width: 1199
        columns: 8
      - name: small
        max_width: 767
        columns: 4

  panels:
    # KPI row - 3 KPIs across
    - id: revenue_kpi
      type: kpi
      title: "Revenue"
      position:
        row: 0
        column: 0
        width: 4
        height: 2
        # Responsive overrides
        breakpoints:
          medium: { width: 4, height: 2 }
          small: { width: 4, height: 2, row: 0 }
      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"
        time_range:
          type: relative
          value: "this_month"
      options:
        format:
          style: currency
          currency: USD
          notation: compact

    - id: orders_kpi
      type: kpi
      title: "Orders"
      position:
        row: 0
        column: 4
        width: 4
        height: 2
        breakpoints:
          medium: { width: 4, height: 2 }
          small: { width: 4, height: 2, row: 2 }
      data:
        source: sales
        metrics:
          - ref: "sales.total_orders"
        time_range:
          type: relative
          value: "this_month"

    - id: conversion_kpi
      type: kpi
      title: "Conversion Rate"
      position:
        row: 0
        column: 8
        width: 4
        height: 2
        breakpoints:
          medium: { width: 4, height: 2, row: 2, column: 0 }
          small: { width: 4, height: 2, row: 4 }
      data:
        source: sales
        metrics:
          - ref: "sales.conversion_rate"
        time_range:
          type: relative
          value: "this_month"
      options:
        format:
          style: percent
          precision: 1

    # Trend chart - full width
    - id: revenue_trend
      type: trend
      title: "Revenue Trend"
      position:
        row: 2
        column: 0
        width: 12
        height: 4
        breakpoints:
          medium: { width: 8, height: 4 }
          small: { width: 4, height: 4, row: 6 }
      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"
        time_range:
          type: relative
          value: "last_12_months"
        time_grain: month

    # Bar chart - 2/3 width on large, full width on medium/small
    - id: category_bar
      type: bar
      title: "Top Categories"
      position:
        row: 6
        column: 0
        width: 8
        height: 4
        breakpoints:
          medium: { width: 8, height: 4 }
          small: { width: 4, height: 4, row: 10 }
      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"
        dimensions:
          - ref: "sales.product_category"
        time_range:
          type: relative
          value: "this_quarter"
      options:
        limit: 10

    # Pie chart - 1/3 width on large, full width on medium/small
    - id: channel_pie
      type: pie
      title: "Channel Mix"
      position:
        row: 6
        column: 8
        width: 4
        height: 4
        breakpoints:
          medium: { width: 8, height: 4, row: 10, column: 0 }
          small: { width: 4, height: 4, row: 14 }
      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"
        dimensions:
          - ref: "sales.sales_channel"
        time_range:
          type: relative
          value: "this_quarter"
      options:
        style: donut

  accessibility:
    alt_text: "Responsive sales dashboard with KPIs, trend chart, and categorical breakdowns that adapt to screen size"
