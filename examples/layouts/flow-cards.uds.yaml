# =============================================================================
# UDS Example: Flow Layout with Cards
# =============================================================================
# Purpose: Auto-flowing card layout that wraps based on available space
# Demonstrates: Flow layout, card-based panels, min/max width constraints
# Spec sections: 12
# =============================================================================

uds: "0.1.0"

dashboard:
  title: "Team Dashboard - Card View"
  intent: "Team metrics displayed as flowing cards that adapt to container width"

  persona:
    type: operator
    characteristics:
      attention_span: brief
      data_literacy: low
      interaction_preference: minimal
      primary_device: any

  semantic_sources:
    - id: hr
      type: dbt
      endpoint: "https://dbt.example.com/semantic-layer/v1"
      authentication:
        type: bearer
        token_env: "DBT_API_TOKEN"

  layout:
    type: flow
    direction: horizontal  # horizontal | vertical
    wrap: true
    gap: 20
    card_min_width: 280
    card_max_width: 400
    align_items: stretch

  panels:
    # Each panel is a card
    - id: headcount
      type: kpi
      title: "Team Size"
      card_style: elevated
      data:
        source: hr
        metrics: [{ ref: "hr.employee_count" }]
        filters:
          - dimension: "hr.department"
            operator: eq
            value: "Engineering"
      options:
        format: { style: number, precision: 0 }

    - id: open_positions
      type: kpi
      title: "Open Positions"
      card_style: elevated
      data:
        source: hr
        metrics: [{ ref: "hr.open_positions_count" }]
        filters:
          - dimension: "hr.department"
            operator: eq
            value: "Engineering"
      options:
        format: { style: number, precision: 0 }

    - id: avg_tenure
      type: kpi
      title: "Average Tenure"
      card_style: elevated
      data:
        source: hr
        metrics: [{ ref: "hr.average_tenure_months" }]
        filters:
          - dimension: "hr.department"
            operator: eq
            value: "Engineering"
      options:
        format: { style: number, precision: 1, suffix: " months" }

    - id: engagement
      type: gauge
      title: "Engagement Score"
      card_style: elevated
      data:
        source: hr
        metrics: [{ ref: "hr.engagement_score" }]
        filters:
          - dimension: "hr.department"
            operator: eq
            value: "Engineering"
      options:
        min: 0
        max: 5
        target: { value: 4.0 }

    - id: turnover
      type: kpi
      title: "Turnover Rate"
      card_style: elevated
      data:
        source: hr
        metrics: [{ ref: "hr.turnover_rate" }]
        filters:
          - dimension: "hr.department"
            operator: eq
            value: "Engineering"
        time_range: { type: relative, value: "last_12_months" }
      options:
        format: { style: percent, precision: 1 }
        thresholds:
          mode: absolute
          values:
            - max: 0.1
              status: positive
            - max: 0.15
              status: neutral
            - max: 0.2
              status: warning
            - min: 0.2
              status: negative

  accessibility:
    alt_text: "Team metrics displayed as auto-flowing cards showing headcount, open positions, tenure, engagement, and turnover"
