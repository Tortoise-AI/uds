# =============================================================================
# UDS Example: Sections Layout with Collapsible Sections
# =============================================================================
# Purpose: Sections layout with collapsible groups
# Demonstrates: Sections layout, collapsible behaviour, nested grids
# Spec sections: 12
# =============================================================================

uds: "0.1.0"

dashboard:
  title: "Executive Dashboard with Sections"
  intent: "Organised view of key metrics grouped by business area with collapsible sections"

  persona:
    type: executive
    characteristics:
      attention_span: brief
      data_literacy: low
      interaction_preference: minimal

  semantic_sources:
    - id: sales
      type: cube
      endpoint: "https://cube.example.com/cubejs-api/v1"
      authentication:
        type: bearer
        token_env: "CUBE_API_TOKEN"

  layout:
    type: sections

    sections:
      - id: financial
        title: "Financial Performance"
        icon: "attach_money"
        collapsible: true
        collapsed: false
        layout:
          type: grid
          columns: 12
          row_height: 80

      - id: operations
        title: "Operations"
        icon: "settings"
        collapsible: true
        collapsed: false
        layout:
          type: grid
          columns: 12
          row_height: 80

      - id: customer
        title: "Customer Metrics"
        icon: "people"
        collapsible: true
        collapsed: true  # Collapsed by default
        layout:
          type: grid
          columns: 12
          row_height: 80

  panels:
    # Financial section panels
    - id: revenue_kpi
      type: kpi
      title: "Total Revenue"
      section: financial
      position:
        row: 0
        column: 0
        width: 4
        height: 2
      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"
        time_range:
          type: relative
          value: "this_quarter"
      options:
        format:
          style: currency
          currency: USD
          notation: compact

    - id: profit_kpi
      type: kpi
      title: "Gross Profit"
      section: financial
      position:
        row: 0
        column: 4
        width: 4
        height: 2
      data:
        source: sales
        metrics:
          - ref: "sales.gross_profit"
        time_range:
          type: relative
          value: "this_quarter"
      options:
        format:
          style: currency
          currency: USD
          notation: compact

    - id: margin_kpi
      type: kpi
      title: "Profit Margin"
      section: financial
      position:
        row: 0
        column: 8
        width: 4
        height: 2
      data:
        source: sales
        metrics:
          - ref: "sales.profit_margin"
        time_range:
          type: relative
          value: "this_quarter"
      options:
        format:
          style: percent
          precision: 1

    # Operations section panels
    - id: orders_kpi
      type: kpi
      title: "Total Orders"
      section: operations
      position:
        row: 0
        column: 0
        width: 6
        height: 2
      data:
        source: sales
        metrics:
          - ref: "sales.total_orders"
        time_range:
          type: relative
          value: "this_month"

    - id: fulfillment_kpi
      type: kpi
      title: "Fulfillment Rate"
      section: operations
      position:
        row: 0
        column: 6
        width: 6
        height: 2
      data:
        source: sales
        metrics:
          - ref: "sales.fulfillment_rate"
        time_range:
          type: relative
          value: "this_month"
      options:
        format:
          style: percent
          precision: 1

    # Customer section panels
    - id: nps_kpi
      type: kpi
      title: "NPS Score"
      section: customer
      position:
        row: 0
        column: 0
        width: 4
        height: 2
      data:
        source: sales
        metrics:
          - ref: "customers.nps_score"
        time_range:
          type: relative
          value: "this_month"

    - id: satisfaction_kpi
      type: kpi
      title: "Satisfaction Score"
      section: customer
      position:
        row: 0
        column: 4
        width: 4
        height: 2
      data:
        source: sales
        metrics:
          - ref: "customers.satisfaction_score"
        time_range:
          type: relative
          value: "this_month"

    - id: retention_kpi
      type: kpi
      title: "Retention Rate"
      section: customer
      position:
        row: 0
        column: 8
        width: 4
        height: 2
      data:
        source: sales
        metrics:
          - ref: "customers.retention_rate"
        time_range:
          type: relative
          value: "this_quarter"
      options:
        format:
          style: percent
          precision: 1

  accessibility:
    alt_text: "Dashboard with collapsible sections showing Financial Performance, Operations, and Customer Metrics"
