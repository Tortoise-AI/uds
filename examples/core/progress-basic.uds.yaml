# =============================================================================
# UDS Example: Basic Progress Panel
# =============================================================================
# Purpose: Progress toward target with percentage display
# Demonstrates: Progress type, target comparison, status colouring, time context
# Spec sections: 14.2 (progress variant), 14.15
# =============================================================================

uds: "0.1.0"

dashboard:
  title: "Quarterly Revenue Progress"
  intent: "Track progress toward quarterly revenue target with time-adjusted status"

  persona:
    type: manager
    characteristics:
      attention_span: brief
      data_literacy: medium
      interaction_preference: minimal

  semantic_sources:
    - id: sales
      type: cube
      endpoint: "https://cube.example.com/cubejs-api/v1"
      authentication:
        type: bearer
        token_env: "CUBE_API_TOKEN"

  layout:
    type: grid
    columns: 12
    row_height: 60

  panels:
    - id: quarterly_target_progress
      type: progress
      title: "Q4 Revenue Target"
      description: "Progress toward $5M quarterly revenue target"

      position:
        row: 0
        column: 0
        width: 6
        height: 3

      data:
        source: sales
        metrics:
          - ref: "sales.total_revenue"      # Current value
          - ref: "sales.revenue_target"      # Target value
        time_range:
          type: relative
          value: "this_quarter"

      options:
        # Target configuration
        target:
          source:
            ref: "sales.revenue_target"
          # Or static value:
          # value: 5000000
          label: "Q4 Target"

        # Progress display
        display:
          style: bar  # Options: bar, ring, linear
          show_percentage: true
          show_values: true
          show_remaining: true

        # Value formatting
        format:
          style: currency
          currency: USD
          notation: compact
          precision: 0

        # Status colouring based on time ratio
        # If 75% through quarter, expect 75% of target
        status:
          mode: time_adjusted  # Options: absolute, time_adjusted
          thresholds:
            - max: 0.8  # Behind schedule
              status: negative
              label: "Behind Target"
            - max: 0.95  # Slightly behind
              status: warning
              label: "At Risk"
            - max: 1.05  # On track
              status: neutral
              label: "On Track"
            - min: 1.05  # Ahead of schedule
              status: positive
              label: "Exceeding Target"

        # Time context
        time_context:
          show_period: true
          show_days_remaining: true
          period_format: "Q[Q] YYYY"

        # Comparison to prior period
        comparison:
          enabled: true
          type: previous_period
          label: "vs Q3"

      accessibility:
        alt_text: "Progress bar showing $4.2M of $5M quarterly target (84%), on track for Q4"
